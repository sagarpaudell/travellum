{% extends 'base.html' %} 

{% load static %}

{% block title %} 
Reset Password
{% endblock %}

{% block content %}  
<div 
  id="login-container" 
  class="container text-muted my-5 px-3 py-5" 
  style="min-height: 50vh; background: rgba(255, 255, 255, 0.91)"
>
  <form action="{% url 'change_pw' %}" class="d-flex align-items-center justify-content-center">
    <div>
      <p class="m-0" style="font-size: .96rem; visibility: hidden;">Type your email in the field below to receive your validation code.</p>
      <label for="vCode" style="font-size: .96rem;">Enter Code:</label>
      <div class="col-md-12 p-0">
        <input id="vCode" class="form-control mb-3" name="vCode" type="text" required />
      </div>
      <input type="submit" class="btn btn-sm btn-outline-dark px-3 mb-5" value="Submit" />
      <div id="hidden" hidden="true">
        <p class="mb-2">Didn't receive a code?</p>
        <button class="btn btn-outline-dark btn-sm" id="creative-name" onclick="myFunction()">Send again</button>
      </div>
    </div>
  </form>
</div>

{% endblock %}

{% block script %}
<script>
  let creativeName=document.getElementById('creative-name')
  function myFunction(){
    let count = 30;
    let hi = setInterval(()=>{
      count -= 1;
      creativeName.innerHTML=`Send again (${count})`
      if(count == 0) clearInterval(hi)
    }, 1000)
    
    creativeName.disabled=true;
    setTimeout(()=>{
      creativeName.disabled=false;
    },30000)
  }
  document.getElementById('hidden')
  setTimeout(()=>{
    hidden.hidden=false
  }, 5000)
</script>
{% endblock %}